
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The little library for your django projects with little effort.">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Django Tenants URL</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#django-tenants-url" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Django Tenants URL" class="md-header__button md-logo" aria-label="Django Tenants URL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Django Tenants URL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tarsil/django-tenants-url" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tarsil/django-tenants-url
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Django Tenants URL" class="md-nav__button md-logo" aria-label="Django Tenants URL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Django Tenants URL
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tarsil/django-tenants-url" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tarsil/django-tenants-url
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Installation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-django-tenants-url" class="md-nav__link">
    About Django Tenants URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
    <nav class="md-nav" aria-label="Motivation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-django-and-python-versions" class="md-nav__link">
    Supported Django and Python Versions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#after-installing-django-tenants" class="md-nav__link">
    After installing django-tenants
  </a>
  
    <nav class="md-nav" aria-label="After installing django-tenants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-django-tenants-url" class="md-nav__link">
    Install django-tenants-url
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#django-tenants-url-settings" class="md-nav__link">
    Django Tenants URL Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x_request_id" class="md-nav__link">
    X_REQUEST_ID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-and-support" class="md-nav__link">
    Documentation and Support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="models/" class="md-nav__link">
        Models
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="views/" class="md-nav__link">
        Views
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="serializers/" class="md-nav__link">
        Serializers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="permissions/" class="md-nav__link">
        Permissions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="urls/" class="md-nav__link">
        URLs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="middleware/" class="md-nav__link">
        Middleware
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="handlers/" class="md-nav__link">
        Handlers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Others
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Others" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Others
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="example/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#about-django-tenants-url" class="md-nav__link">
    About Django Tenants URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
    <nav class="md-nav" aria-label="Motivation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-django-and-python-versions" class="md-nav__link">
    Supported Django and Python Versions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#after-installing-django-tenants" class="md-nav__link">
    After installing django-tenants
  </a>
  
    <nav class="md-nav" aria-label="After installing django-tenants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-django-tenants-url" class="md-nav__link">
    Install django-tenants-url
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#django-tenants-url-settings" class="md-nav__link">
    Django Tenants URL Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x_request_id" class="md-nav__link">
    X_REQUEST_ID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-and-support" class="md-nav__link">
    Documentation and Support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="django-tenants-url">Django Tenants URL<a class="headerlink" href="#django-tenants-url" title="Permanent link">&para;</a></h1>
<p><img alt="Build and Publish" src="https://github.com/tarsil/django-tenants-url/actions/workflows/main.yml/badge.svg" />
<a href="https://sonarcloud.io/summary/new_code?id=tarsil_django-tenants-url"><img alt="Quality Gate Status" src="https://sonarcloud.io/api/project_badges/measure?project=tarsil_django-tenants-url&amp;metric=alert_status" /></a>
<a href="https://sonarcloud.io/summary/new_code?id=tarsil_django-tenants-url"><img alt="Security Rating" src="https://sonarcloud.io/api/project_badges/measure?project=tarsil_django-tenants-url&amp;metric=security_rating" /></a>
<a href="https://sonarcloud.io/summary/new_code?id=tarsil_django-tenants-url"><img alt="Code Smells" src="https://sonarcloud.io/api/project_badges/measure?project=tarsil_django-tenants-url&amp;metric=code_smells" /></a>
<a href="https://sonarcloud.io/summary/new_code?id=tarsil_django-tenants-url"><img alt="Vulnerabilities" src="https://sonarcloud.io/api/project_badges/measure?project=tarsil_django-tenants-url&amp;metric=vulnerabilities" /></a></p>
<p><strong>Official Documentation</strong> - <a href="https://tarsil.github.io/django-tenants-url/">https://tarsil.github.io/django-tenants-url/</a></p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#django-tenants-url">Django Tenants URL</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#about-django-tenants-url">About Django Tenants URL</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#motivation">Motivation</a><ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#supported-django-and-python-versions">Supported Django and Python Versions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#after-installing-django-tenants">After installing django-tenants</a><ul>
<li><a href="#install-django-tenants-url">Install django-tenants-url</a></li>
</ul>
</li>
<li><a href="#django-tenants-url-settings">Django Tenants URL Settings</a></li>
<li><a href="#x_request_id">X_REQUEST_ID</a></li>
</ul>
</li>
<li><a href="#example">Example</a></li>
<li><a href="#documentation-and-support">Documentation and Support</a></li>
<li><a href="#license">License</a></li>
</ul>
<hr />
<h2 id="about-django-tenants-url">About Django Tenants URL<a class="headerlink" href="#about-django-tenants-url" title="Permanent link">&para;</a></h2>
<p>Django Tenants URL is a wrapper on the top of the <code>django-tenants</code> package that serves a different
yet common use case, the multi-tenant implementation via HEADER and not using <code>sub domains</code>.</p>
<p>A special thanks to the team behind <a href="https://github.com/django-tenants/django-tenants">Django Tenants</a>.</p>
<h2 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h2>
<p>The project contains <a href="views/">views</a>, <a href="permissions/">permissions</a>,
<a href="models/">models</a> and more addons that can be used across projects.</p>
<p><code>django-tenants-url</code> is built on the top of the following dependencies:</p>
<ol>
<li><a href="https://www.djangoproject.com/">Django</a></li>
<li><a href="https://www.django-rest-framework.org/">Django Rest Framework</a></li>
<li><a href="https://django-tenants.readthedocs.io/en/latest/">Django Tenants</a></li>
</ol>
<h2 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h2>
<p>When implementing multi tenancy architecture there are many factors to consider and cover and
those were greatly approached by <a href="https://github.com/django-tenants/django-tenants">django-tenants</a>
but so summarize, there are 3 common ways:</p>
<ol>
<li><strong>Shared schemas</strong> - The data of all users are shared within the same schema and filtered by
   common IDs or whatever that is unique to the platform. This is not so great for GDPR.</li>
<li><strong>Shared database, different Schemas</strong> - The user's data is split by different schemas but live
   on the same database.</li>
<li><strong>Different databases</strong> - The user's data or any data live on different databases.</li>
</ol>
<p>As mentioned before, <code>django-tenants-url</code> is a wrapper on the top of <code>django-tenants</code>
and therefore we will be approaching the second.</p>
<p>Many companies have limited resources (money, people...) and limited choices from those
constraints. When implementing multi tenancy, the default would be to use subdomains
in order to access the desired schema. E.g.:</p>
<div class="highlight"><pre><span></span><code>www.mycompany.saascompany.com
</code></pre></div>
<p><code>My Company</code> is the tenant of the <code>saascompany.com</code> that is publicaly available to the users.
When the <code>mycompany</code> is sent to the backend, the middleware splits the subdomain and
the TLD (top-level domain) and maps the tenant with the schema associated.</p>
<p>For this work, one of the ways is to change your <code>apache</code>, <code>nginx</code> or any other configurations
that accepts and forwards calls to the <code>*.sasscompany.com</code> and performs the above action.</p>
<p>If the frontend and backend are split, extra configurations need also to be made on that
front and all of this can be a pain.</p>
<p><strong>What does django-tenants-url solve?</strong></p>
<p>The principle of mapping users to the schemas remains the same but the way of doing it
is what diverges from the rest. What if we were able to only use <code>www.sasscompany.com</code>,
login as usual and automatically the platform knows exactly to which schema the user
needs to be mapped and forward?</p>
<p><strong>This is what django-tenants-url solves. A single url that does the multi tenancy
without breaking the principle and architecture and simply using one single url</strong></p>
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<h4 id="supported-django-and-python-versions">Supported Django and Python Versions<a class="headerlink" href="#supported-django-and-python-versions" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Django / Python</th>
<th>3.7</th>
<th>3.8</th>
<th>3.9</th>
<th>3.10</th>
</tr>
</thead>
<tbody>
<tr>
<td>3.1</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>3.2</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>4.0</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>4.1</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>Prior to install the <code>django-tenants-url</code>, <code>django-tenants</code> needs to be installed
as well. Please follow the installation steps from
<a href="https://www.github.com/django-tenants/django-tenants">Django Tenants</a></p>
<h3 id="after-installing-django-tenants">After installing django-tenants<a class="headerlink" href="#after-installing-django-tenants" title="Permanent link">&para;</a></h3>
<h4 id="install-django-tenants-url">Install django-tenants-url<a class="headerlink" href="#install-django-tenants-url" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>pip install django-tenants-url
</code></pre></div>
<ol>
<li>The <code>TENANT_MODEL</code> and <code>TENANT_DOMAIN_MODEL</code> from <code>django-tenants</code>
   need to be also in the <code>settings.py</code>.</li>
<li>Add <code>django-tenants-url</code> to <code>INSTALLED_APPS</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="o">...</span>
  <span class="s1">&#39;django_tenants&#39;</span><span class="p">,</span>
  <span class="s1">&#39;django_tenants_url&#39;</span><span class="p">,</span>
  <span class="o">...</span>
<span class="p">]</span>
</code></pre></div>
<ol>
<li>
<p><code>django-tenants-url</code> offers a special wrapper over the <code>mixins</code> of <code>django-tenants</code>
   with the same names so you don't need to worry about breaking changes and the
   additional unique <code>TenantUserMixin</code> that maps the users with a tenant.</p>
</li>
<li>
<p>Create the models.</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># myapp.models.py</span>

<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django_tenants_url.models</span> <span class="kn">import</span> <span class="n">TenantMixin</span><span class="p">,</span> <span class="n">DomainMixin</span><span class="p">,</span> <span class="n">TenantUserMixin</span>


<span class="k">class</span> <span class="nc">Client</span><span class="p">(</span><span class="n">TenantMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This table provides the `tenant_uuid` needed</span>
<span class="sd">    to be used in the `X_REQUEST_HEADER` and consumed</span>
<span class="sd">    by the RequestUUIDTenantMiddleware.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Domain</span><span class="p">(</span><span class="n">DomainMixin</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">TenantUser</span><span class="p">(</span><span class="n">TenantUserMixin</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
<ol>
<li>Add the <code>DTU_TENANT_USER_MODEL</code> to <code>settings.py</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># settings.py</span>

<span class="o">...</span>

<span class="n">DTU_TENANT_USER_MODEL</span> <span class="o">=</span> <span class="s1">&#39;myapp.TenantUser&#39;</span>

<span class="o">...</span>
</code></pre></div>
<ol>
<li>Update the <code>MIDDLEWARE</code> to have the new <code>RequestUUIDTenantMiddleware</code>.
   Preferentially at the very top.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1"># settings.py</span>

<span class="o">...</span>

<span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">&#39;django_tenants_url.middleware.RequestUUIDTenantMiddleware&#39;</span><span class="p">,</span>
  <span class="s1">&#39;django.middleware.security.SecurityMiddleware&#39;</span><span class="p">,</span>
  <span class="o">...</span>
<span class="p">]</span>

<span class="o">...</span>
</code></pre></div>
<ol>
<li>Generate the migrations.</li>
</ol>
<div class="highlight"><pre><span></span><code>python manage.py makemigrations
</code></pre></div>
<ol>
<li>Run the migrations as if it was <code>django-tenants</code> and not the classic <code>migrate</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code>python manage.py migrate_schemas
</code></pre></div>
<ol>
<li>The <code>UUID</code> needed for the <code>RequestUUIDTenantMiddleware</code> can be found in your
   table inherited from the <code>TenantMixin</code>.</li>
</ol>
<p><strong>None: Do not run <code>python manage.py migrate</code> or else it will sync everything into the public.</strong></p>
<p>And that is it. The <code>RequestUUIDTenantMiddleware</code> should be able to map
the <code>TenantUser</code> created with a tenant and route the queries to the associated schema.</p>
<p>Checkout the <a href="https://tarsil.github.io/django-tenants-url/">documentation</a>
and understand how to integrate with your views and taking advantage
of the utils for your <code>TenantUser</code> (or your implementation),</p>
<h3 id="django-tenants-url-settings">Django Tenants URL Settings<a class="headerlink" href="#django-tenants-url-settings" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># default settings</span>

<span class="n">DTU_TENANT_NAME</span> <span class="o">=</span> <span class="s2">&quot;Public&quot;</span>
<span class="n">DTU_TENANT_SCHEMA</span> <span class="o">=</span> <span class="s2">&quot;public&quot;</span>
<span class="n">DTU_DOMAIN_NAME</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
<span class="n">DTU_PAID_UNTIL</span> <span class="o">=</span> <span class="s2">&quot;2100-12-31&quot;</span>
<span class="n">DTU_ON_TRIAL</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">DTU_HEADER_NAME</span> <span class="o">=</span> <span class="s2">&quot;HTTP_X_REQUEST_ID&quot;</span>
<span class="n">DTU_AUTO_CREATE_SCHEMA</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">DTU_AUTO_DROP_SCHEMA</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">DTU_TENANT_USER_MODEL</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
<h3 id="x_request_id">X_REQUEST_ID<a class="headerlink" href="#x_request_id" title="Permanent link">&para;</a></h3>
<p>By default <code>django-tenants-url</code> has the header name <code>HTTP_X_REQUEST_ID</code> that will be lookup
from the middleware when sent via HTTP.
This name can be overriten by the special setting <code>DTU_HEADER_NAME</code>.</p>
<h2 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h2>
<p>A Django Like app implementing Django Tenants Url can be found <a href="https://github.com/tarsil/django-tenants-url/tree/main/dtu_test_project">here</a>.</p>
<p>The example can be found <a href="example/">here</a></p>
<h2 id="documentation-and-support">Documentation and Support<a class="headerlink" href="#documentation-and-support" title="Permanent link">&para;</a></h2>
<p>Full documentation for the project is available at <a href="https://tarsil.github.io/django-tenants-url/">https://tarsil.github.io/django-tenants-url/</a></p>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p>Copyright (c) 2022-present Tiago Silva and contributors under the <a href="https://opensource.org/licenses/MIT">MIT license</a>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
      
        
        <a href="models/" class="md-footer__link md-footer__link--next" aria-label="Next: Models" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Models
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.a6c66575.min.js"></script>
      
    
  </body>
</html>